<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Opening Roblox…</title>
  <style>
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; 
           display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#0b0f14;color:#e6eef8;}
    .card { max-width:560px;padding:20px;border-radius:10px;background:#0f1720;border:1px solid rgba(255,255,255,0.03);
           box-shadow:0 8px 30px rgba(2,6,23,0.6);text-align:center; }
    a.button { display:inline-block;margin-top:14px;padding:10px 16px;border-radius:8px;background:#2563eb;color:#fff;text-decoration:none;}
    p.small { color:#9aa7bd;font-size:0.9rem; margin:0.5rem 0 0; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Opening Roblox...</h2>
    <p id="msg">Please wait — your browser will attempt to open Roblox.</p>
    <a id="fallback" class="button" href="#" target="_blank" rel="noopener">Open Roblox (if nothing happens)</a>
    <p class="small">If clicking the button doesn't work, allow the browser to open external apps, or copy/paste the link into your address bar.</p>
  </div>

  <script>
    // Read url param
    const params = new URLSearchParams(location.search);
    const raw = params.get('url');
    const msg = document.getElementById('msg');
    const fallback = document.getElementById('fallback');

    if (!raw) {
      msg.textContent = 'Missing url parameter.';
      fallback.style.display = 'none';
    } else {
      try {
        const decoded = decodeURIComponent(raw);

        // Simple safety: only allow roblox deep links or roblox.com links
        const ok = decoded.startsWith('roblox://') || decoded.includes('roblox.com');
        if (!ok) {
          msg.textContent = 'Blocked: url looks unsafe.';
          fallback.style.display = 'none';
          console.warn('Blocked redirect url:', decoded);
        } else {
          // Set the fallback a href so user can click if JS redirect is blocked.
          fallback.href = decoded;

          // Try to redirect after a small delay so user sees the message
          // This will prompt browser to launch Roblox client
          setTimeout(() => {
            try {
              window.location.href = decoded;
            } catch (e) {
              // fallback link visible
              console.error('Redirect failed:', e);
            }
          }, 300);
        }
      } catch (e) {
        msg.textContent = 'Invalid url parameter.';
        fallback.style.display = 'none';
      }
    }
  </script>
</body>
</html>
